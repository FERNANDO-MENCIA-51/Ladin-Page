"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3445],{6339:function(e,t,n){var o,r=n(7294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}t.Z=function(e){return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 512 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=r.createElement("path",{d:"M256 48C141.1 48 48 141.1 48 256s93.1 208 208 208 208-93.1 208-208S370.9 48 256 48zm17.2 109.6-3.1 115.1c-.2 8.2-5.9 14.8-14.1 14.8s-13.9-6.6-14.1-14.8l-3.1-115.1c-.2-9.6 7.5-17.6 17.2-17.6 9.6 0 17.4 7.9 17.2 17.6zM256 354c-10.7 0-19.1-8.1-19.1-18.4s8.4-18.4 19.1-18.4c10.7 0 19.1 8.1 19.1 18.4S266.7 354 256 354z",stroke:"none"})))}},3159:function(e,t,n){var o,r=n(7294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}t.Z=function(e){return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 1024 1024",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7-210.6 292a31.8 31.8 0 0 1-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z",stroke:"none"})))}},2565:function(e,t,n){var o,r=n(7294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}t.Z=function(e){return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 1024 1024",className:"close-circle_svg__iconRed",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=r.createElement("path",{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 0 1-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z",stroke:"none"})))}},1030:function(e,t,n){var o,r=n(7294);function i(){return i=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i.apply(this,arguments)}t.Z=function(e){return r.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 512 512",className:"search-icon_svg__search__icon",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=r.createElement("path",{d:"M505 442.7 405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z",stroke:"none"})))}},6065:function(e,t,n){n.d(t,{z:function(){return r}});var o=n(5893),r=function(e){var t=e.text,n=e.className,r=e.key,i=e.disabled,s=void 0!==i&&i,c=e.onClick;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("button",{className:n,onClick:c,disabled:s,children:t},r)})}},8531:function(e,t,n){n.d(t,{z:function(){return o.z}});var o=n(6065)},7876:function(e,t,n){n.d(t,{O:function(){return u}});var o,r,i=n(5893),s=n(7294);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c.apply(this,arguments)}var a=function(e){return s.createElement("svg",c({stroke:"currentColor",fill:"currentColor",strokeWidth:0,viewBox:"0 0 24 24",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},e),o||(o=s.createElement("path",{fill:"none",d:"M0 0h24v24H0z",stroke:"none"})),r||(r=s.createElement("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3A8.994 8.994 0 0 0 13 3.06V1h-2v2.06A8.994 8.994 0 0 0 3.06 11H1v2h2.06A8.994 8.994 0 0 0 11 20.94V23h2v-2.06A8.994 8.994 0 0 0 20.94 13H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z",stroke:"none"})))},u=function(e){var t=e.onClick;return(0,i.jsxs)("button",{className:"gps-btn",onClick:t,children:[(0,i.jsx)("i",{children:(0,i.jsx)(a,{})}),"Usar mi ubicaci\xf3n actual"]})}},4913:function(e,t,n){n.d(t,{G:function(){return c}});var o=n(5893),r=n(7294),i=n(7740),s=n(2717),c=function(e){var t=e.coordinates,n=e.onGetAddressByLatLng,c=(0,i.R)(s.w).coverageCoordinates;(0,r.useEffect)((function(){if(null!==t.lat&&null!==t.lng)return a(t,18,t);return a({lat:-12.1074093,lng:-77.0358781},12,t)}),[t,c]);var a=function(e,t,o){var r={center:new google.maps.LatLng(e.lat,e.lng),zoom:t,mapTypeId:google.maps.MapTypeId.ROADMAP},i=new google.maps.Map(document.getElementById("googleMaps"),r),s=new google.maps.Marker({position:new google.maps.LatLng(o.lat,o.lng),map:i,draggable:!0});google.maps.event.addListener(s,"dragend",(function(e){var t=e.latLng,o=t.lat,r=t.lng;n({lat:o(),lng:r()})})),new google.maps.Polygon({paths:c,strokeColor:"#000",strokeOpacity:.4,strokeWeight:2,fillColor:"#000",fillOpacity:.2}).setMap(i)};return(0,o.jsx)("div",{id:"googleMaps",style:{width:"100%",height:"100%"}})}},9679:function(e,t,n){n.d(t,{D:function(){return r}});var o=n(5893),r=function(e){var t=e.value,n=e.onChange,r=e.error;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"reference-input",children:[(0,o.jsx)("p",{className:"reference-input__label",children:"Ingresa una referencia"}),(0,o.jsx)("input",{className:"reference-input__input",type:"text",placeholder:"Escribe aqu\xed",value:t,onChange:n,style:{borderColor:t?"#bebcbb":"red"}}),(0,o.jsx)("p",{className:"reference-input__text",children:r})]})})}},5001:function(e,t,n){n.d(t,{D:function(){return o.D}});var o=n(9679)},1334:function(e,t,n){n.d(t,{k:function(){return a}});var o=n(7568),r=n(655),i=n(5893),s=n(7294),c=n(1030),a=function(e){var t=e.onChangePlace,n=e.currentAddress,a=(0,s.useRef)(),u=(0,s.useRef)();return(0,s.useEffect)((function(){a.current=new window.google.maps.places.Autocomplete(u.current,{componentRestrictions:{country:"pe"}}),a.current.addListener("place_changed",(0,o.Z)((function(){var e;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,a.current.getPlace()];case 1:return(e=n.sent()).geometry?(t(e),[2]):[2]}}))})))}),[]),(0,s.useEffect)((function(){n&&(u.current.value=n)}),[n]),(0,i.jsxs)("section",{className:"search-location",children:[(0,i.jsx)("input",{ref:u,placeholder:"Escribe aqu\xed",type:"text"}),(0,i.jsx)("span",{className:"search-location__btn",children:(0,i.jsx)("i",{children:(0,i.jsx)(c.Z,{})})})]})}},1868:function(e,t,n){n.d(t,{d:function(){return r}});var o=n(5893),r=function(e){var t=e.icon,n=e.text,r=e.bold;return(0,o.jsxs)("p",{className:"search-message",children:[(0,o.jsx)("i",{children:t})," ",(0,o.jsxs)("span",{children:[n,(0,o.jsx)("strong",{children:r})]})]})}},3507:function(e,t,n){n.d(t,{_:function(){return i}});var o=n(5893),r=n(7294),i=function(e){var t=e.onClick,n=e.pickUp,i=e.delivery,s=(0,r.useState)(!1)[1],c=(0,r.useState)(!1)[1];return(0,o.jsxs)("section",{className:"switchBtn",onClick:t,children:[(0,o.jsx)("button",{value:"pickUp",className:"switchBtn__1 ".concat(n?"black":"brown"),onClick:function(){return c(n)},children:"Recoger en tienda"}),(0,o.jsx)("button",{value:"delivery",className:"switchBtn__2 ".concat(i?"black":"brown"),onClick:function(){return s(i)},children:"Delivery"})]})}},2634:function(e,t,n){n.d(t,{W:function(){return r}});var o=n(5893),r=function(e){var t=e.onChange,n=e.id,r=e.text,i=e.price,s=e.name,c=e.value,a=e.checked;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"checklist",onChange:t,children:[(0,o.jsx)("input",{className:"checklist__input",type:"checkbox",id:n,name:s,value:c,defaultChecked:a}),(0,o.jsx)("label",{className:"checklist__text",htmlFor:n,children:r}),(0,o.jsxs)("label",{className:"checklist__price",htmlFor:n,children:["+ S/ ",i.toFixed(2)]})]})})}},9621:function(e,t,n){n.d(t,{s:function(){return r}});var o=n(5893),r=function(e){var t=e.value,n=e.onChange,r=e.onKeyDown,i=e.onKeyPress;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"comment",children:[(0,o.jsx)("p",{children:"COMENTARIOS ADICIONALES"}),(0,o.jsx)("input",{type:"text",name:"comment",placeholder:"Escribe aqu\xed",value:t,onChange:n,onKeyDown:r,onKeyUp:i})]})})}},3244:function(e,t,n){n.d(t,{_:function(){return a}});var o=n(5893),r=n(7294),i=n(1649),s=n(3854),c=function(e){e.id;var t=e.src,n=e.product,r=e.price,i=(e.pricePromotion,e.slug),c=e.onClick;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"complement-card",children:[(0,o.jsx)("section",{className:"complement-card__image",style:{backgroundImage:"url(".concat(t,")")},children:(0,o.jsx)("section",{className:"complement-card__image__moreBtn",onClick:c(i),children:(0,o.jsx)(s.Yat,{className:"complement-card__image__moreBtn__icon"})})}),(0,o.jsxs)("section",{className:"complement-card__content",children:[(0,o.jsx)("h1",{children:n}),(0,o.jsxs)("p",{children:["S/ ",r]})]})]})})},a=function(e){var t=e.phrase,n=e.products,s=e.onClick,a=(0,r.useRef)(null);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"complement-slide",children:[(0,o.jsxs)("section",{className:"complement-slide__content",children:[(0,o.jsx)("p",{className:"complement-slide__content__phrase",children:t}),(0,o.jsxs)("section",{className:"complement-slide__content__btns",children:[(0,o.jsx)("button",{className:"complement-slide__content__btns__prev",onClick:function(){if(a.current.children.length>0){var e=a.current.children.length-1,t=a.current.children[e];a.current.insertBefore(t,a.current.firstChild),a.current.style.transition="none";var n=a.current.children[0].offsetWidth;a.current.style.transform="translateX(-".concat(n,"px)"),setTimeout((function(){a.current.style.transition="200ms ease-out all",a.current.style.transform="translateX(0)"}),30)}},children:(0,o.jsx)(i.bHS,{})}),(0,o.jsx)("button",{className:"complement-slide__content__btns__next",onClick:function(){if(a.current.children.length>0){var e=a.current.children[0];a.current.style.transition="200ms ease-out all";var t=a.current.children[0].offsetWidth;a.current.style.transform="translateX(-".concat(t,"px)");var n=function(){a.current.style.transition="none",a.current.style.transform="translateX(0)",a.current.appendChild(e),a.current.removeEventListener("transitionend",n)};a.current.addEventListener("transitionend",n)}},children:(0,o.jsx)(i.am,{})})]})]}),(0,o.jsx)("section",{className:"complement-slide__carousel",ref:a,children:n.map((function(e,t){return(0,o.jsx)(c,{id:e.id,src:e.imageMini,product:e.name,price:e.price,pricePromotion:e.pricePromotion,slug:e.slug,onClick:s},t)}))})]})})}},2352:function(e,t,n){n.d(t,{n:function(){return s}});var o=n(5893),r=n(6893),i=n(6065),s=function(e){var t=e.add,n=e.reduce,s=e.quantity,c=e.total,a=e.onClick,u=e.animation,d=e.btnText,l=Number(c).toFixed(2);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"product-add",children:[(0,o.jsxs)("section",{className:"product-add__counter ".concat(u&&"animationBtnAdd"),children:[(0,o.jsx)("span",{className:"product-add__counter__minus",children:(0,o.jsx)(r.FS3,{onClick:n})}),(0,o.jsx)("p",{children:s}),(0,o.jsx)("span",{children:(0,o.jsx)(r.O9D,{onClick:t})})]}),(0,o.jsx)("section",{className:"product-add__btn",children:(0,o.jsx)(i.z,{className:"btn-add",text:"".concat(d," S/").concat(l),onClick:a})})]})})}},1284:function(e,t,n){n.d(t,{v:function(){return r}});var o=n(5893),r=function(e){var t=e.product,n=e.description;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"product-description",children:[(0,o.jsx)("h1",{className:"product-description__product",children:t}),(0,o.jsx)("p",{className:"product-description__text",children:n})]})})}},4272:function(e,t,n){n.d(t,{o:function(){return r}});var o=n(5893),r=function(e){var t=e.onChange,n=e.id,r=e.text,i=e.price,s=e.name,c=e.value,a=e.checked;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"radiolist",onChange:t,children:[(0,o.jsx)("input",{className:"radiolist__input",type:"radio",id:n,name:s,value:c,defaultChecked:a}),(0,o.jsx)("label",{className:"radiolist__text",htmlFor:n,children:r}),(0,o.jsxs)("label",{className:"radiolist__price",htmlFor:n,children:["+ S/ ",i.toFixed(2)]})]})})}},2923:function(e,t,n){n.d(t,{$:function(){return W}});var o=n(5893),r=n(1163),i=n(7294),s=n(5152),c=n.n(s),a=n(471),u=n(7568),d=n(655),l=n(4371),m=n(2717),p=n(9983),f=function(){var e=(0,u.Z)((function(e,t,n,o,r,i){var s,c,a,f;return(0,d.__generator)(this,(function(_){switch(_.label){case 0:s=function(){var e=(0,u.Z)((function(e,t){return(0,d.__generator)(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,l.default.get(e,{headers:{Authorization:"Token ".concat(t)}})];case 1:return n.sent(),[3,3];case 2:return n.sent(),[2];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),c=JSON.parse(window.localStorage.getItem("loginPA")),_.label=1;case 1:return _.trys.push([1,7,,8]),[4,l.default.post("ordenes/",e,{headers:{"Content-Type":"application/json"}})];case 2:return a=_.sent(),f=a.data.id,!0!==t?[3,4]:[4,l.default.post("ordenesCombos/",{order:f,combo:n,quantity:o,coment:r,ordenes_combos_grupos_productos:i},{headers:{"Content-Type":"application/json"}})];case 3:return _.sent(),[3,6];case 4:return!1!==t?[3,6]:[4,l.default.post("ordenesProductos/",{order:f,product:n,quantity:o,coment:r,ordenes_productos_grupos_customs:i},{headers:{"Content-Type":"application/json"}})];case 5:_.sent(),_.label=6;case 6:return p.i.fetchOrderById(f),window.localStorage.setItem("orderIdPA",JSON.stringify(f)),window.localStorage.setItem("ModalityInfoPA",JSON.stringify(e)),null!==f&&s("ordenes/".concat(f,"/asignar_cliente/"),c.token),e.addressStore?(m.w.setAddress(e.addressStore),m.w.setStore(e.storeName),m.w.setPickUpHour(e.pickUpHour),m.w.setReference(null),m.w.setModality(e.modality)):e.address&&(m.w.setAddress(e.address),m.w.setStore(null),m.w.setPickUpHour(null),m.w.setReference(e.reference),m.w.setModality(e.modality)),[3,8];case 7:return _.sent(),[2];case 8:return[2]}}))}));return function(t,n,o,r,i,s){return e.apply(this,arguments)}}(),_=n(7740),h=n(2505),g=n(4913),v=n(3750),x=n(3507),b=n(4924),j=n(9330),y=n(5819),C=(0,n(1265).Z)({breakpoints:{values:{md:920}}}),N=function(e){var t=e.placeholder,n=(e.label,e.value),r=e.onChange,i=e.data;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("section",{className:"select-delivery-address",children:(0,o.jsxs)(j.Z,{value:n,onChange:r,displayEmpty:!0,className:"custom-select",sx:{width:"120px","&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid #484850"}},children:[(0,o.jsx)(y.Z,{value:0,children:t}),null===i||void 0===i?void 0:i.map((function(e,t){return(0,o.jsx)(y.Z,{sx:(0,b.Z)({width:"100%",whiteSpace:"inherit"},C.breakpoints.up("md"),{maxWidth:"338px"}),value:e.id,id:e.id,children:e.address},t)}))]})})})},k=n(5001),w=n(1868),S=n(8531),G=n(4477),z=n(6339),P=n(3159),I=n(2565),Z=function(e){var t=e.token,n=e.dataOrder,s=e.clickModality,c=e.onCloseMyAddresses,a=(0,_.R)(h.M).myAddresses,m=(0,i.useState)(0),p=m[0],b=m[1],j=(0,r.useRouter)(),y=(0,i.useState)({lat:null,lng:null}),C=y[0],Z=y[1],M=(0,i.useState)(""),R=M[0],E=M[1],O=(0,i.useState)(),A=O[0],D=O[1],q=(0,i.useState)(""),B=q[0],F=q[1],L=(0,i.useState)(!1),T=L[0],W=L[1],H=(0,i.useState)(""),U=H[0],K=H[1],J=function(){var e=(0,u.Z)((function(e){var n,o;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return null!==(n=Number(e.target.value))&&0!==n?[3,1]:(b(0),[3,3]);case 1:return b(n),[4,l.default.get("direcciones/".concat(n,"/"),{headers:{Authorization:"Token ".concat(t)}})];case 2:o=r.sent(),V(Number(o.data.latitude),Number(o.data.longitude)),Z({lat:o.data.latitude,lng:o.data.longitude}),E(o.data.address),F(o.data.reference),r.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),V=(0,i.useCallback)(function(){var e=(0,u.Z)((function(e,t){var n;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,l.default.post("/coberturas/verificar_direccion/",{latitude:e,longitude:t},{headers:{"Content-Type":"application/json"}})];case 1:return(n=o.sent()).data.isPoint?D(n.data.shopId):D(0),[3,3];case 2:return o.sent(),[2];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[]),X=(0,i.useCallback)(function(){var e=(0,u.Z)((function(e){var t,n;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return V(e.lat,e.lng),Z(e),[4,(new window.google.maps.Geocoder).geocode({location:e})];case 1:return n=o.sent(),E(null===(t=null===n||void 0===n?void 0:n.results[0])||void 0===t?void 0:t.formatted_address),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[V]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"delivery",children:[(0,o.jsxs)("section",{className:"delivery__content",children:[(0,o.jsxs)("h1",{className:"delivery__content__title",children:["Por favor elige la ",(0,o.jsx)("strong",{children:"modalidad de entrega"})]}),(0,o.jsx)(x._,{delivery:!1,pickUp:!0,onClick:s}),(0,o.jsxs)("section",{className:"delivery__content__search",children:[(0,o.jsx)("p",{className:"delivery__content__search__subtitle",children:"Selecciona una direcci\xf3n"}),(0,o.jsx)(N,{data:a,placeholder:"Seleccionar",value:p,onChange:J}),(0,o.jsxs)("section",{className:"delivery__content__search__new",onClick:function(e){return c(e)},children:[(0,o.jsx)("i",{children:(0,o.jsx)(v.Kix,{})}),(0,o.jsx)("p",{children:"Ingresa una nueva direcci\xf3n"})]}),T&&(0,o.jsx)(w.d,{icon:(0,o.jsx)(z.Z,{className:"iconBlack"}),text:"Por favor selecciona una direcci\xf3n para verificar si estas en el rango de reparto."}),0===A&&!T&&(0,o.jsx)(w.d,{icon:(0,o.jsx)(I.Z,{className:"iconRed"}),text:"Estas fuera del rango de reparto. Intenta seleccionando ",bold:"Recojo en tienda."}),A>0&&!T&&(0,o.jsxs)("section",{className:"delivery__content__search__reference",children:[(0,o.jsx)(w.d,{icon:(0,o.jsx)(P.Z,{className:"iconGreen"}),text:"\xa1Genial! Est\xe1s dentro de nuestra zona de reparto."}),(0,o.jsx)(k.D,{value:B,onChange:function(e){F(e.target.value)},error:U})]})]}),(0,o.jsx)("section",{className:"delivery__content__btn",children:(0,o.jsx)(S.z,{className:"btn-grey ".concat(B.length>3&&"btn-black"),text:"continuar",onClick:function(e){if(e.preventDefault(),""===R)setTimeout((function(){W(!1)}),4500),W(!T);else if(B.length<=3)setTimeout((function(){K("")}),2e3),K("*Obligatorio");else{var t={modality:"Delivery",shop:A,storeName:null,addressStore:null,schedule_pickup:null,pickUpHour:null,address:R,reference:B,latitude:C.lat,longitude:C.lng};f(t,n.isCombo,n.id,n.quantity,n.comment,n.customizers),(0,G.b)(),j.push("/#".concat(n.colectionSlug))}}})})]}),(0,o.jsx)("section",{className:"delivery__map",children:(0,o.jsx)(g.G,{coordinates:C,setCoordinates:Z,onGetAddressByLatLng:X})})]})})},M=n(1334),R=n(7876),E=n(9679),O=function(e){var t=e.clickModality,n=e.dataOrder,s=(0,_.R)(h.M),c=s.isLoggedIn,a=s.myAddresses,m=(0,r.useRouter)(),p=(0,i.useState)({lat:null,lng:null}),v=p[0],b=p[1],j=(0,i.useState)(""),y=j[0],C=j[1],N=(0,i.useState)(),k=N[0],O=N[1],A=(0,i.useState)(""),D=A[0],q=A[1],B=(0,i.useState)(!1),F=B[0],L=B[1],T=(0,i.useState)(""),W=T[0],H=T[1],U=(0,i.useState)(!0),K=U[0],J=U[1],V=(0,i.useState)(!1),X=(V[0],V[1]),Y=(0,i.useState)(""),Q=Y[0],$=Y[1];(0,i.useEffect)((function(){if(c){var e=JSON.parse(window.localStorage.getItem("loginPA"));if(!e)return;null==e.token&&void 0==e.token||e.token.length>0&&(ee("clientes/direcciones/",e.token),$(e.token))}else J(!1);a.length>0&&X(!0)}),[c,a]);var ee=function(){var e=(0,u.Z)((function(e,t){var n;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,l.default.get(e,{headers:{Authorization:"Token ".concat(t)}})];case 1:return(n=o.sent()).status>=200&&n.status<300&&n.data.length>0&&h.M.setMyAddresses(n.data),[3,3];case 2:return o.sent(),[2];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),te=(0,i.useCallback)(function(){var e=(0,u.Z)((function(e,t){var n;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,l.default.post("/coberturas/verificar_direccion/",{latitude:e,longitude:t},{headers:{"Content-Type":"application/json"}})];case 1:return(n=o.sent()).data.isPoint?O(n.data.shopId):O(0),[3,3];case 2:return o.sent(),[2];case 3:return[2]}}))}));return function(t,n){return e.apply(this,arguments)}}(),[]),ne=(0,i.useCallback)(function(){var e=(0,u.Z)((function(e){var t,n;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return te(e.lat,e.lng),b(e),[4,(new window.google.maps.Geocoder).geocode({location:e})];case 1:return n=o.sent(),C(null===(t=null===n||void 0===n?void 0:n.results[0])||void 0===t?void 0:t.formatted_address),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),[te]);return(0,o.jsxs)(o.Fragment,{children:[!0===K&&(0,o.jsx)(Z,{token:Q,dataOrder:n,onCloseMyAddresses:function(e){e.preventDefault(),J(!1)},clickModality:t}),!1===K&&(0,o.jsxs)("section",{className:"delivery",children:[(0,o.jsxs)("section",{className:"delivery__content",children:[(0,o.jsxs)("h1",{className:"delivery__content__title",children:["Por favor elige la ",(0,o.jsx)("strong",{children:"modalidad de entrega"})]}),(0,o.jsx)(x._,{delivery:!1,pickUp:!0,onClick:function(e){t(e)}}),(0,o.jsxs)("section",{className:"delivery__content__search",children:[(0,o.jsx)("p",{className:"delivery__content__search__subtitle",children:"Busca tu direcci\xf3n"}),(0,o.jsx)(M.k,{onChangePlace:function(e){var t=e.geometry.location,n=e.formatted_address,o=null===t||void 0===t?void 0:t.lat(),r=null===t||void 0===t?void 0:t.lng();o&&r&&(te(o,r),b({lat:o,lng:r}),C(n))},currentAddress:y}),(0,o.jsx)(R.O,{onClick:function(){navigator.geolocation.getCurrentPosition((function(e){var t=e.coords.latitude,n=e.coords.longitude;t&&n&&ne({lat:t,lng:n})}))}}),F&&(0,o.jsx)(w.d,{icon:(0,o.jsx)(z.Z,{className:"iconBlack"}),text:"Por favor ingresa tu direcci\xf3n para verificar si estas en el rango de reparto."}),0===k&&!F&&(0,o.jsx)(w.d,{icon:(0,o.jsx)(I.Z,{className:"iconRed"}),text:"Estas fuera del rango de reparto. Intenta seleccionando ",bold:"Recojo en tienda."}),k>0&&!F&&(0,o.jsxs)("section",{className:"delivery__content__search__reference",children:[(0,o.jsx)(w.d,{icon:(0,o.jsx)(P.Z,{className:"iconGreen"}),text:"\xa1Genial! Est\xe1s dentro de nuestra zona de reparto."}),(0,o.jsx)(E.D,{value:D,onChange:function(e){q(e.target.value)},error:W})]})]}),(0,o.jsx)("section",{className:"delivery__content__btn",children:(0,o.jsx)(S.z,{className:"btn-grey ".concat(D.length>3&&"btn-black"),text:"continuar",onClick:function(e){if(e.preventDefault(),""===y)setTimeout((function(){L(!1)}),4500),L(!F);else if(D.length<=3)setTimeout((function(){H("")}),2e3),H("*Obligatorio");else{var t={modality:"Delivery",shop:k,storeName:null,addressStore:null,schedule_pickup:null,pickUpHour:null,address:y,reference:D,latitude:v.lat,longitude:v.lng};f(t,n.isCombo,n.id,n.quantity,n.comment,n.customizers),(0,G.b)(),m.push("/#".concat(n.colectionSlug))}}})})]}),(0,o.jsx)("section",{className:"delivery__map",children:(0,o.jsx)(g.G,{coordinates:v,setCoordinates:b,onGetAddressByLatLng:ne})})]})]})},A=n(913),D=n(4895),q=function(e){var t=e.storeSelected,n=e.onChange,r=e.selectedTime,i=(0,D.K)("tiendas/".concat(t,"/horarios_recojos/")).data;return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)("section",{className:"time-range",children:(0,o.jsx)(A.Z,{sx:{m:1,minWidth:120},children:(0,o.jsxs)(j.Z,{displayEmpty:!0,inputProps:{"aria-label":"Without label"},MenuProps:{PaperProps:{style:{maxHeight:125,width:250,height:149},className:"scrollCream"}},sx:{boxShadow:"0px 0.7px 7px rgba(0,0,0, 0.1)",borderRadius:"30px",padding:"5px 17px 0px",fontSize:"17px","&.Mui-focused .MuiOutlinedInput-notchedOutline":{border:"1px solid #484850"}},className:"time-range__select",value:r,onChange:n,children:[(0,o.jsx)(y.Z,{value:"",className:"time-range__select__options",sx:{textAlign:"center",fontSize:"17px"},children:"Selecciona aqu\xed"}),i.map((function(e,t){return(0,o.jsx)(y.Z,{className:"time-range__select__options",sx:{justifyContent:"center",fontSize:"18px",textAlign:"center"},value:e.id,"data-hour-text":e.schedulePickup,children:e.schedulePickup},t)}))]})})})})},B=n(6065),F=n(8392),L=function(e){var t=e.clickModality,n=e.dataStores,s=e.dataOrder,c=(0,i.useState)(n[0].id),a=c[0],m=c[1],p=(0,i.useState)(n[0].name),h=p[0],g=p[1],v=(0,i.useState)(n[0].adress),b=v[0],j=v[1],y=(0,i.useState)(n[0].image),C=y[0],N=y[1],k=(0,i.useState)(n[0].slug),w=k[0],S=k[1],z=(0,i.useState)(""),P=z[0],I=z[1],Z=(0,_.R)(F.u).existsComplement,M=function(e){e.preventDefault(),m(Number(e.target.id)),g(e.target.getAttribute("data-name-store")),j(e.target.getAttribute("data-address-store")),N(e.target.getAttribute("data-img-store")),S(e.target.getAttribute("data-slug-store")),I("")},R=(0,r.useRouter)(),E=function(){var e=(0,u.Z)((function(e){var t,n,o;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return e.preventDefault(),""===P?[3,2]:[4,l.default.get("tiendas/".concat(w,"/horarios_recojos/"))];case 1:n=r.sent(),o=null===(t=n.data)||void 0===t?void 0:t.filter((function(e){return e.id===P}))[0].schedulePickup,f({modality:"En Tienda",shop:a,storeName:h,addressStore:b,schedule_pickup:P,pickUpHour:o,address:null,reference:null,coordinates:null},s.isCombo,s.id,s.quantity,s.comment,s.customizers),(0,G.b)(),Z?F.u.setExistsComplement(""):R.push("/#".concat(s.colectionSlug)),r.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"pick-up",children:[(0,o.jsxs)("section",{className:"pick-up__content",children:[(0,o.jsxs)("h1",{className:"pick-up__content__title",children:["Por favor elige la ",(0,o.jsx)("strong",{children:"modalidad de entrega"})]}),(0,o.jsx)(x._,{delivery:!0,pickUp:!1,onClick:t}),(0,o.jsx)("section",{className:"pick-up__content__store",children:n.map((function(e,t){return(0,o.jsx)("button",{className:"btn-store ".concat(a===Number(e.id)&&"storeBorderBtn"),id:e.id,"data-address-store":e.adress,"data-slug-store":e.slug,"data-name-store":e.name,"data-img-store":e.image,onClick:M,children:e.name},t)}))}),(0,o.jsx)("p",{className:"pick-up__content__address",children:b}),(0,o.jsx)("p",{className:"pick-up__content__text",children:"Elige el rango horario para recoger tu pedido"}),(0,o.jsx)(q,{storeSelected:w,onChange:function(e){I(e.target.value)},selectedTime:P}),(0,o.jsx)("section",{className:"pick-up__content__btn",children:(0,o.jsx)(B.z,{className:"btn-grey ".concat(""!=P&&"btn-black"),text:"continuar",onClick:E})})]}),(0,o.jsx)("section",{className:"pick-up__picture",children:(0,o.jsx)("img",{src:C,alt:""})})]})})},T=c()((function(){return n.e(3113).then(n.bind(n,3113))}),{loadableGenerated:{webpack:function(){return[3113]}},ssr:!1}),W=function(e){var t=e.dataStores,n=e.dataOrder,s=(0,r.useRouter)(),c=(0,i.useState)("pickUp"),u=c[0],d=c[1],l=(0,i.useState)(!0)[0],m=function(e){e.preventDefault(),void 0!==n.colectionSlug?s.push("/#".concat(n.colectionSlug)):s.push("/")},p=function(e){e.preventDefault();var t=e.target.value;d(t)};return"pickUp"==u?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(T,{open:l,onClose:m,children:(0,o.jsxs)("section",{className:"modality",children:[(0,o.jsx)("section",{className:"modality__close",onClick:m,children:(0,o.jsx)(a.Fk5,{className:"modality__close__icon"})}),(0,o.jsx)(L,{clickModality:p,dataStores:t,dataOrder:n})]})})}):"delivery"==u?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(T,{open:l,onClose:m,children:(0,o.jsxs)("section",{className:"modality",children:[(0,o.jsx)("section",{className:"modality__close",onClick:m,children:(0,o.jsx)(a.Fk5,{})}),(0,o.jsx)(O,{clickModality:p,dataOrder:n})]})})}):void 0}},3445:function(e,t,n){n.r(t),n.d(t,{default:function(){return je}});var o=n(5893),r=n(5152),i=n.n(r),s=n(7294),c=n(1163),a=n(471),u=n(7740),d=n(7568),l=n(253),m=n(655),p=n(4371),f=n(1438),_=n(2951),h=n(4924),g=n(9815),v=n(3932),x=function(){function e(){(0,f.Z)(this,e),(0,h.Z)(this,"customizerGroup",[]),(0,h.Z)(this,"modifierGroup",[]),(0,h.Z)(this,"currentCustomizer","")}return(0,_.Z)(e,[{key:"setModifierGroup",value:function(e){this.modifierGroup=e}},{key:"setCustomizerGroup",value:function(e){var t=e.type,n=e.idPresentationGroup,o=e.idPresentation,r=e.presentationPrice,i=e.idNoteGroup,s=e.idNote,c=e.notePrice,a=e.idModifierGroup,u=e.idModifier,d=e.checked,l=e.amount;if("presentation"===t){var m=this.customizerGroup.findIndex((function(e){return e.presentation_group===n}));-1===m?this.customizerGroup=(0,g.Z)(this.customizerGroup).concat([{presentation_group:n,modifier_group:null,note_group:null,ordenes_productos_customs:[{presentation:o,modifier:null,note:null,amount:r}]}]):this.customizerGroup[m].ordenes_productos_customs[0].presentation=o}else if("note"===t){var p=this.customizerGroup.findIndex((function(e){return e.note_group===i}));-1===p?this.customizerGroup=(0,g.Z)(this.customizerGroup).concat([{presentation_group:null,modifier_group:null,note_group:i,ordenes_productos_customs:[{presentation:null,modifier:null,note:s,amount:c}]}]):this.customizerGroup[p].ordenes_productos_customs[0].note=s}else if("modifier"===t){var f=this.customizerGroup.findIndex((function(e){return e.modifier_group===a}));if(d)-1===f?this.customizerGroup=(0,g.Z)(this.customizerGroup).concat([{presentation_group:null,modifier_group:a,note_group:null,ordenes_productos_customs:[{presentation:null,amount:l,modifier:u,note:null}]}]):this.customizerGroup[f].ordenes_productos_customs=(0,g.Z)(this.customizerGroup[f].ordenes_productos_customs).concat([{presentation:null,modifier:u,amount:l,note:null}]);else{var _=this.customizerGroup[f].ordenes_productos_customs.filter((function(e){return e.modifier!==u}));_.length?this.customizerGroup[f].ordenes_productos_customs=_:this.customizerGroup.splice(f,1)}}}},{key:"setCurrentCustomizer",value:function(e){this.currentCustomizer=e}},{key:"clearCustomizerGroup",value:function(){this.customizerGroup=[]}}]),e}(),b=(0,v.wW)(new x,{sumAmount:function(e){return e.customizerGroup.reduce((function(e,t){return e+t.ordenes_productos_customs.reduce((function(e,t){return e+Number(t.amount)}),0)}),0)},getIdCustomizerSelected:function(e){var t=e.customizerGroup;return function(e,n){var o=t.find((function(t){return t["".concat(n,"_group")]===e}));return o&&n?o.ordenes_productos_customs.map((function(e){return Number(e[n])})):[]}}}),j=function(e){var t=(0,s.useState)([]),n=t[0],o=t[1],r=(0,s.useState)([]),i=r[0],a=r[1],u=(0,s.useState)([]),f=u[0],_=u[1],h=(0,s.useState)([]),g=h[0],v=h[1],x=(0,s.useState)([]),j=x[0],y=x[1],C=(0,c.useRouter)();(0,s.useEffect)((function(){void 0!==e&&null!==e&&e!==Number&&N(e)}),[e]);var N=function(){var e=(0,d.Z)((function(e){var t,n,r,i,s,c;return(0,m.__generator)(this,(function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,Promise.all([p.default.get("productos/".concat(e,"/")),p.default.get("productos/".concat(e,"/grupos_presentaciones/")),p.default.get("productos/".concat(e,"/grupos_modificadores/")),p.default.get("productos/".concat(e,"/grupos_notas/")),p.default.get("productos/".concat(e,"/complementos/"))])];case 1:return t=l.Z.apply(void 0,[u.sent(),5]),n=t[0],r=t[1],i=t[2],s=t[3],c=t[4],o(n.data),a(r.data),_(i.data),b.setModifierGroup(i.data),v(s.data),y(c.data),[3,3];case 2:return u.sent(),C.push("/"),[3,3];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{product:n,presentation:i,modifier:f,note:g,complement:j}},y=n(2952),C=n(6042),N=n(9396),k=n(9534),w=n(2734),S=n(8396),G=n(4184),z=n.n(G),P=n(6833),I=n(1284),Z=n(2352),M=n(8193),R=n(4272),E=function(e){var t=e.title,n=e.arrayItems,r=e.name,i=e.onChange,c=(e.alert,e.id),a=e.type,d=(e.isMandatory,e.isSize),l=e.isSugar,m=e.setGetIsSelectNote,p=e.setGetIsSelectPres,f=(0,u.R)(b),_=f.currentCustomizer,h=f.getIdCustomizerSelected,g=_===r,v=(0,s.useState)(!1),x=v[0],j=v[1],y=(0,s.useState)(!1),C=y[0],N=y[1],k=h(c,a);(0,s.useEffect)((function(){"note"==a&&(1==k.length?(m(!0),j(!0)):(m(!1),j(!1))),"presentation"==a&&(1==k.length?(p(!0),N(!0)):(p(!1),N(!1)))}),[k]);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{className:g?"customizeColored":"note"==a&&l&&!x||"presentation"==a&&d&&!C?"customize-red":"customize",children:[(0,o.jsx)("h1",{children:t.toUpperCase()}),g?(0,o.jsx)(M.n6z,{className:"customizeColored__iconMinus",onClick:function(){b.setCurrentCustomizer("")}}):(0,o.jsx)(M.OzW,{className:"customize__iconPlus",onClick:function(){b.setCurrentCustomizer(r)}})]}),g&&(0,o.jsx)("section",{className:"customizeColored__content",children:null===n||void 0===n?void 0:n.map((function(e){return(0,o.jsx)(R.o,{className:"customize__items",id:"".concat(r).concat(e.id),name:r,value:e.amount,text:e.name,price:e.amount,checked:e.selected||k.includes(e.id),onChange:i},e.id)}))})]})},O=n(2634),A=function(e){var t=e.title,n=e.arrayItems,r=e.name,i=e.onChange,s=e.id,c=e.type,a=(0,u.R)(b),d=a.currentCustomizer,l=a.getIdCustomizerSelected,m=d===r,p=l(s,c);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{className:m?"customizeColored":"customize",children:[(0,o.jsx)("h1",{children:t.toUpperCase()}),m?(0,o.jsx)(M.n6z,{className:"customizeColored__iconMinus",onClick:function(){b.setCurrentCustomizer("")}}):(0,o.jsx)(M.OzW,{className:"customize__iconPlus",onClick:function(){b.setCurrentCustomizer(r)}})]}),m&&(0,o.jsx)("section",{className:"customizeColored__contentWithCost",children:null===n||void 0===n?void 0:n.map((function(e){return(0,o.jsx)(O.W,{id:e.id,name:r,value:e.amount,text:e.name,price:e.amount,checked:e.selected||p.includes(e.id),onChange:i},e.id)}))})]})},D=n(9621),q=n(3244),B=n(2923),F=n(2224),L=n(8392),T=n(5129);n(5675);function W(e){var t=e.id,n=e.title,r=e.onChange,i=e.alert,s=e.isSize,c=e.setGetIsSelectPres,a=(0,P.V)("gruposPresentaciones/".concat(t,"/presentaciones/")).data;return(0,o.jsx)(E,{title:n,id:t,arrayItems:a,name:"presentationIdGroup".concat(t),onChange:r,alert:i,type:"presentation",isSize:s,setGetIsSelectPres:c})}function H(e){var t=e.id,n=e.title,r=e.onChange,i=e.alert,s=e.isSugar,c=e.setGetIsSelectNote,a=(0,P.V)("gruposNotas/".concat(t,"/notas/")).data;return(0,o.jsx)(E,{title:n,id:t,arrayItems:a,name:"noteIdGroup".concat(t),onChange:r,alert:i,type:"note",isSugar:s,setGetIsSelectNote:c})}function U(e){var t=e.id,n=e.title,r=e.onChange,i=e.multiple,s=(0,P.V)("gruposModificadores/".concat(t,"/modificadores/")).data;return(0,o.jsx)(o.Fragment,{children:!i&&(0,o.jsx)(A,{title:n,id:t,arrayItems:s,name:"modifierIdGroup".concat(t),onChange:r,type:"modifier"})})}var K=function(e){var t=e.data,n=e.presentationGroup,r=e.noteGroup,i=e.complementList,a=e.stores;(0,T.w)();var d=(0,u.R)(b),l=(0,u.R)(L.u).existsComplement,m=d.modifierGroup,p=d.customizerGroup,f=d.sumAmount,_=(0,c.useRouter)(),h=(0,s.useState)(!1),g=h[0],v=h[1],x=(0,s.useState)(),j=x[0],y=x[1],G=(0,s.useState)(null),P=G[0],M=G[1],R=(0,s.useState)(0),E=R[0],O=R[1],A=(0,s.useState)(null),K=A[0],J=A[1],V=(0,s.useState)(0),X=V[0],Y=V[1],Q=(0,s.useState)(""),$=Q[0],ee=Q[1],te=(0,s.useState)(1),ne=te[0],oe=te[1],re=(0,s.useState)(!1),ie=re[0],se=re[1],ce=(0,s.useState)(null),ae=ce[0],ue=ce[1],de=(0,s.useState)({presentation:!1,note:!1}),le=de[0],me=de[1],pe=(0,s.useState)(),fe=pe[0],_e=pe[1],he=(0,s.useState)(!1),ge=he[0],ve=he[1],xe=(0,s.useState)(!1),be=xe[0],ye=xe[1],Ce=(0,s.useState)(!1),Ne=Ce[0],ke=Ce[1],we=(0,s.useState)(!1),Se=we[0],Ge=we[1],ze=(0,s.useState)(window.innerHeight),Pe=ze[0],Ie=ze[1],Ze=(0,w.Z)(),Me=(0,S.Z)(Ze.breakpoints.down("md"));(0,s.useEffect)((function(){return window.addEventListener("resize",Re),function(){window.removeEventListener("resize",Re)}}),[]);var Re=(0,s.useCallback)((function(){Ie(window.innerHeight)}),[]),Ee=function(e){return function(){L.u.setExistsComplement(e),ue(e)}},Oe=function(e){var t=Number(e.target.name.replace("presentationIdGroup","")),n=Number(e.target.id.replace(e.target.name,""));M(n),O(Number(e.target.value)),b.setCustomizerGroup({type:"presentation",idPresentationGroup:t,idPresentation:n,presentationPrice:0})},Ae=function(e){var t=Number(e.target.name.replace("noteIdGroup","")),n=Number(e.target.id.replace(e.target.name,""));J(n),Y(Number(e.target.value)),b.setCustomizerGroup({type:"note",idNoteGroup:t,idNote:n,notePrice:0})},De=function(e){var t=Number(e.target.name.replace("modifierIdGroup","")),n=e.target,o=n.value,r=n.id,i=n.checked;b.setCustomizerGroup({type:"modifier",idModifierGroup:t,checked:i,amount:Number(o),idModifier:r})},qe=function(e){e.preventDefault(),oe(ne+1),ne>=10&&(oe(10),setTimeout((function(){se(!0)}),10),se(!1))},Be=function(e){e.preventDefault(),ne>1&&oe(ne-1)},Fe=function(e){e.preventDefault();var o=p.map((function(e){return(0,N.Z)((0,C.Z)({},e),{ordenes_productos_customs:e.ordenes_productos_customs.map((function(e){e.amount;return(0,k.Z)(e,["amount"])}))})})),i=JSON.parse(window.localStorage.getItem("ModalityInfoPA"));if(void 0===t.id)_.push("/");else if(n.length>0&&null===P)null==K&&ve(!0),null!=K&&ve(!1),ye(!0);else if(r.length>0&&null===K)ye(!1),ve(null===K);else if(null===i)v(!0),y({isCombo:!1,id:t.id,quantity:ne,comment:"".concat(""===$?"":$),customizers:o,colectionSlug:t.coleccionSlug});else if(null!==i){var s={order:JSON.parse(window.localStorage.getItem("orderIdPA")),product:t.id,quantity:ne,coment:"".concat(""===$?"":$),ordenes_productos_grupos_customs:o};l?L.u.setExistsComplement(""):_.push("/#".concat(t.slug),void 0,{scroll:!1}),(0,F.Q)(s),J(null),Y(0),M(null),O(0),ee(""),oe(1),me({presentation:!1,note:!1}),b.clearCustomizerGroup()}},Le=z()("main-product__container__content__description",{scrolled:fe});return(0,s.useEffect)((function(){var e=function(){_e(!0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{style:Me?{height:Pe}:{},className:"main-product",children:[(0,o.jsx)("section",{className:"main-product__image",children:(0,o.jsx)("img",{src:t.image,alt:""})}),(0,o.jsx)("div",{className:"main-product__afterImageMob"}),(0,o.jsxs)("section",{className:"main-product__container",children:[(0,o.jsxs)("section",{className:"main-product__container__content",children:[(0,o.jsx)("div",{className:"main-product__container__content__divMob1"}),(0,o.jsx)("div",{className:"main-product__container__content__divMob2"}),(0,o.jsx)("section",{className:Le,children:(0,o.jsx)(I.v,{product:t.name,description:t.description})}),(0,o.jsxs)("section",{className:"main-product__container__content__sections",children:[n.length>0&&(0,o.jsxs)("section",{className:"main-product__container__content__sections__presentations",children:[n.map((function(e){return(0,o.jsx)(W,{id:e.id,title:e.name,onChange:Oe,alert:le.presentation,isSize:be,setGetIsSelectPres:Ge},e.id)})),be&&!Se&&(0,o.jsx)("p",{className:"input-auth__error__combo",children:"Debe seleccionar un campo"})]}),r.length>0&&(0,o.jsxs)("section",{className:"main-product__container__content__sections__notes",children:[r.map((function(e){return(0,o.jsx)(H,{id:e.id,title:e.name,onChange:Ae,alert:le.note,isSugar:ge,setGetIsSelectNote:ke},e.id)})),ge&&!Ne&&(0,o.jsx)("p",{className:"input-auth__error__combo",children:"Debe seleccionar un campo"})]}),m.length>0&&(0,o.jsx)("section",{className:"main-product__container__content__sections__modifiers",children:m.map((function(e){return(0,o.jsx)(U,{id:e.id,title:e.name,multiple:e.isMultiple,onChange:De},e.id)}))}),(0,o.jsx)("section",{style:Me?{height:"unset"}:{},className:"main-product__container__content__sections__comment",children:(0,o.jsx)(D.s,{value:$,onChange:function(e){ee(e.target.value)},onKeyDown:function(e){e.key&&Ie("100vh")},onKeyPress:function(e){"Enter"===e.key&&Ie(window.innerHeight)}})}),i.length>0&&(0,o.jsxs)("section",{className:"main-product__container__content__sections__complements",children:[(0,o.jsx)("h1",{className:"main-product__container__content__sections__complements__title",children:"Complementa tu pedido"}),i.map((function(e,t){return(0,o.jsx)(q._,{phrase:e.name,products:e.products,onClick:Ee},t)}))]})]})]}),(0,o.jsx)("section",{className:"main-product__container__end",children:(0,o.jsx)(Z.n,{btnText:"Agregar",add:qe,reduce:Be,quantity:ne,total:t.price>t.pricePromotion&&0!=t.pricePromotion?(t.pricePromotion+f+E+X)*ne:(t.price+f+E+X)*ne,onClick:Fe,animation:ie})})]}),(0,o.jsx)("section",{className:"main-product__endMobile",children:(0,o.jsx)(Z.n,{btnText:"Agregar",add:qe,reduce:Be,quantity:ne,total:t.price>t.pricePromotion&&0!=t.pricePromotion?(t.pricePromotion+f+E+X)*ne:(t.price+f+E+X)*ne,onClick:Fe,animation:ie})})]}),g&&(0,o.jsx)(B.$,{dataStores:a,dataOrder:j}),l&&(0,o.jsx)(je,{idComplement:ae,onCloseComplement:function(){ue(null)},isComplement:!0,stores:a})]})},J=n(9983),V=function(){function e(){(0,f.Z)(this,e),(0,h.Z)(this,"modifierGroup",[]),(0,h.Z)(this,"presentationGroup",[]),(0,h.Z)(this,"noteGroup",[]),(0,h.Z)(this,"productRetrive",{product:{},coment:""})}return(0,_.Z)(e,[{key:"fetchProductRetrive",value:function(e){var t=this;return(0,d.Z)((function(){var n,o,r,i,s,c,a,u,l,f,_,h,g;return(0,m.__generator)(this,(function(v){switch(v.label){case 0:return[4,p.default.get("ordenesProductos/".concat(e,"/"))];case 1:return n=v.sent(),o=n.data,r=o.product,i=r.slug,[4,p.default.get("productos/".concat(i,"/grupos_presentaciones/"))];case 2:return s=v.sent(),c=s.data,[4,p.default.get("productos/".concat(i,"/grupos_notas/"))];case 3:return a=v.sent(),u=a.data,[4,p.default.get("productos/".concat(i,"/grupos_modificadores/"))];case 4:return l=v.sent(),f=l.data,_=c.map(function(){var t=(0,d.Z)((function(t){var n,o;return(0,m.__generator)(this,(function(r){switch(r.label){case 0:return[4,p.default.get("ordenesProductos/".concat(e,"/presentaciones/?grupo_presentacion_id=").concat(t.id))];case 1:return n=r.sent(),o=n.data,[2,(0,N.Z)((0,C.Z)({},t),{items:o})]}}))}));return function(e){return t.apply(this,arguments)}}()),h=u.map(function(){var t=(0,d.Z)((function(t){var n,o;return(0,m.__generator)(this,(function(r){switch(r.label){case 0:return[4,p.default.get("ordenesProductos/".concat(e,"/notas/?grupo_nota_id=").concat(t.id))];case 1:return n=r.sent(),o=n.data,[2,(0,N.Z)((0,C.Z)({},t),{items:o})]}}))}));return function(e){return t.apply(this,arguments)}}()),g=f.map(function(){var t=(0,d.Z)((function(t){var n,o;return(0,m.__generator)(this,(function(r){switch(r.label){case 0:return[4,p.default.get("ordenesProductos/".concat(e,"/modificadores/?grupo_modificador_id=").concat(t.id))];case 1:return n=r.sent(),o=n.data,[2,(0,N.Z)((0,C.Z)({},t),{items:o})]}}))}));return function(e){return t.apply(this,arguments)}}()),t.productRetrive=o,[4,Promise.all(_)];case 5:return t.presentationGroup=v.sent(),[4,Promise.all(h)];case 6:return t.noteGroup=v.sent(),[4,Promise.all(g)];case 7:return t.modifierGroup=v.sent(),[2]}}))}))()}},{key:"updateCustomizer",value:function(e){var t=e.type,n=e.idGroup,o=e.idItem,r=e.checked,i=this["".concat(t,"Group")].findIndex((function(e){return e.id===n}));-1!==i&&this["".concat(t,"Group")][i].items.forEach((function(e){void 0!==r?e.id===o&&(e.selected=r):e.selected=e.id===o}))}},{key:"updateAddItemById",value:function(e){var t=this.productRetrive,n=t.quantity+1;n<=10&&(t.totalAmount=t.totalAmount/t.quantity*n,t.quantity=n,p.default.put("ordenesProductos/".concat(e,"/"),{quantity:n}))}},{key:"updateReduceItemById",value:function(e){var t=this.productRetrive,n=t.quantity-1;n>=1&&(t.totalAmount=t.totalAmount/t.quantity*n,t.quantity=n,p.default.put("ordenesProductos/".concat(e,"/"),{quantity:n}))}}]),e}(),X=(0,v.wW)(new V,{sumAmountModifiersRetrive:function(e){var t=e.presentationGroup,n=e.noteGroup,o=e.modifierGroup;return t.reduce((function(e,t){return e+t.items.reduce((function(e,t){return t.selected?e+t.amount:e}),0)}),0)+n.reduce((function(e,t){return e+t.items.reduce((function(e,t){return t.selected?e+t.amount:e}),0)}),0)+o.reduce((function(e,t){return e+t.items.reduce((function(e,t){return t.selected?e+t.amount:e}),0)}),0)}});function Y(e){var t=e.id,n=e.title,r=e.items,i=e.onChange;e.alert,e.idItem;return(0,o.jsx)(E,{title:n,arrayItems:r,name:"presentationIdGroupR".concat(t),onChange:i})}function Q(e){var t=e.id,n=e.title,r=e.items,i=e.onChange;e.alert,e.idItem;return(0,o.jsx)(E,{title:n,arrayItems:r,name:"noteIdGroupR".concat(t),onChange:i})}function $(e){var t=e.id,n=e.title,r=e.items,i=e.onChange,s=e.multiple;e.idItem;return!s&&(0,o.jsx)(A,{title:n,arrayItems:r,name:"modifierIdGroupR".concat(t),onChange:i})}var ee=function(e){var t=e.idProductRetrive,n=e.onCloseModal,r=(0,u.R)(X),i=r.productRetrive,c=r.presentationGroup,a=r.noteGroup,l=r.modifierGroup,f=r.sumAmountModifiersRetrive,_=i.product,h=(0,s.useState)(""),v=h[0],x=h[1],b=(0,s.useState)(!1),j=b[0],y=(b[1],(0,s.useState)()),C=y[0],N=y[1],k=(0,s.useState)(window.innerHeight),G=k[0],P=k[1],M=(0,w.Z)(),R=(0,S.Z)(M.breakpoints.down("md"));(0,s.useEffect)((function(){return window.addEventListener("resize",E),function(){window.removeEventListener("resize",E)}}),[]);var E=(0,s.useCallback)((function(){P(window.innerHeight)}),[]);(0,s.useEffect)((function(){X.fetchProductRetrive(t),x(i.coment)}),[t,i.coment]);var O=(0,s.useCallback)((function(e){var t=e.target,n=t.name,o=t.id,r=Number(n.replace("presentationIdGroupR","")),i=Number(o.replace(n,""));X.updateCustomizer({type:"presentation",idGroup:r,idItem:i})}),[]),A=function(e){var t=e.target,n=t.name,o=t.id,r=Number(n.replace("noteIdGroupR","")),i=Number(o.replace(n,""));X.updateCustomizer({type:"note",idGroup:r,idItem:i})},q=function(e){var t=Number(e.target.name.replace("modifierIdGroupR","")),n=e.target,o=n.id,r=n.checked;X.updateCustomizer({type:"modifier",idGroup:t,checked:r,idItem:Number(o)})},B=function(e){e.preventDefault(),X.updateAddItemById(t)},F=function(e){e.preventDefault(),X.updateReduceItemById(t)},L=function(){var e=(0,d.Z)((function(e){var o,r,s,c,a,u,d;return(0,m.__generator)(this,(function(l){switch(l.label){case 0:e.preventDefault(),o=X.presentationGroup,r=X.modifierGroup,s=X.noteGroup,c=o.map((function(e){return{presentation_group:e.id,modifier_group:null,note_group:null,ordenes_productos_customs:e.items.filter((function(e){return e.selected})).map((function(e){return{presentation:e.id,modifier:null,note:null}}))}})),a=r.map((function(e){return{presentation_group:null,modifier_group:e.id,note_group:null,ordenes_productos_customs:e.items.filter((function(e){return e.selected})).map((function(e){return{presentation:null,modifier:e.id,note:null}}))}})),u=s.map((function(e){return{presentation_group:null,modifier_group:null,note_group:e.id,ordenes_productos_customs:e.items.filter((function(e){return e.selected})).map((function(e){return{presentation:null,modifier:null,note:e.id}}))}})),d={coment:"".concat(""===v?"":v),ordenes_productos_grupos_customs:(0,g.Z)(c).concat((0,g.Z)(a),(0,g.Z)(u))},l.label=1;case 1:return l.trys.push([1,3,,4]),[4,p.default.put("ordenesProductos/".concat(t,"/"),d,{headers:{"Content-Type":"application/json"}})];case 2:return l.sent(),J.i.fetchOrderById(i.order),[3,4];case 3:return l.sent(),[2];case 4:return x(""),n(e),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),T=z()("main-product__container__content__description",{scrolled:C});return(0,s.useEffect)((function(){var e=function(){N(!0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{style:R?{height:G}:{},className:"main-product",children:[(0,o.jsx)("section",{className:"main-product__image",children:(0,o.jsx)("img",{src:_.image,alt:""})}),(0,o.jsx)("div",{className:"main-product__afterImageMob"}),(0,o.jsxs)("section",{className:"main-product__container",children:[(0,o.jsxs)("section",{className:"main-product__container__content",children:[(0,o.jsx)("div",{className:"main-product__container__content__divMob1"}),(0,o.jsx)("div",{className:"main-product__container__content__divMob2"}),(0,o.jsx)("section",{className:T,children:(0,o.jsx)(I.v,{product:_.name,description:_.description})}),(0,o.jsxs)("section",{className:"main-product__container__content__sections main-product__container__content__retrive",children:[(0,o.jsx)("section",{className:"main-product__container__content__sections__presentations",children:c.map((function(e){return(0,o.jsx)(Y,{id:e.id,title:e.name,items:e.items,idItem:t,onChange:O},e.id)}))}),(0,o.jsx)("section",{className:"main-product__container__content__sections__notes",children:a.map((function(e){return(0,o.jsx)(Q,{id:e.id,title:e.name,items:e.items,idItem:t,onChange:A},e.id)}))}),(0,o.jsx)("section",{className:"main-product__container__content__sections__modifiers",children:l.map((function(e){return(0,o.jsx)($,{id:e.id,title:e.name,items:e.items,idItem:t,multiple:e.isMultiple,onChange:q},e.id)}))}),(0,o.jsx)("section",{className:"main-product__container__content__sections__comment",children:(0,o.jsx)(D.s,{value:v,onChange:function(e){e.preventDefault(),x(e.target.value)},onKeyDown:function(e){e.key&&P("100vh")},onKeyPress:function(e){"Enter"===e.key&&P(window.innerHeight)}})})]})]}),(0,o.jsx)("section",{className:"main-product__container__end",children:(0,o.jsx)(Z.n,{btnText:"Guardar",add:B,reduce:F,quantity:i.quantity,total:_.price>_.pricePromotion&&0!=_.pricePromotion?(_.pricePromotion+f)*i.quantity:(_.price+f)*i.quantity,onClick:L,animation:j})})]}),(0,o.jsx)("section",{className:"main-product__endMobile",children:(0,o.jsx)(Z.n,{btnText:"Guardar",add:B,reduce:F,quantity:i.quantity,total:_.price>_.pricePromotion&&0!=_.pricePromotion?(_.pricePromotion+f)*i.quantity:(_.price+f)*i.quantity,onClick:L,animation:j})})]})})},te={id:0,presentations:[],modifiers:[],notes:[],status:"NEW",name:"",slug:"",openModal:!1,idGroup:0},ne={modifier:[],note:[],presentation:[]},oe=function(){function e(){(0,f.Z)(this,e),(0,h.Z)(this,"comboDetailRetrive",{combo:{},coment:""}),(0,h.Z)(this,"comboGroupProductsRetrive",[]),(0,h.Z)(this,"groupSelected",0),(0,h.Z)(this,"product",te)}return(0,_.Z)(e,[{key:"fetchComboRetrive",value:function(e){var t=this;return(0,d.Z)((function(){var n,o,r,i;return(0,m.__generator)(this,(function(s){switch(s.label){case 0:return e?[4,p.default.get("ordenesCombos/".concat(e,"/"))]:[2];case 1:return n=s.sent(),t.comboDetailRetrive=n.data,[4,p.default.get("combos/".concat(n.data.combo.slug,"/grupos_productos/"))];case 2:return o=s.sent(),r=o.data,[4,Promise.all(r.map(function(){var n=(0,d.Z)((function(n){var o,r,i,s,c,a,u;return(0,m.__generator)(this,(function(d){switch(d.label){case 0:return[4,p.default.get("ordenesCombos/".concat(e,"/productos/?grupo_producto_id=").concat(n.id))];case 1:return o=d.sent().data,r=o.filter((function(e){return e.selected})),i=[(0,C.Z)({},n)],s={products:o},r.length?(a=Object.assign,u=[{}],[4,t.loadDataComboRetriveByItems({idItemCombo:e,idGroupProduct:n.id,selecteds:r})]):[3,3];case 2:return c=a.apply(Object,u.concat(d.sent())),[3,4];case 3:c=ne,d.label=4;case 4:return[2,N.Z.apply(void 0,i.concat((s.customizers=c,s)))]}}))}));return function(e){return n.apply(this,arguments)}}()))];case 3:return i=s.sent(),t.comboGroupProductsRetrive=i,[2]}}))}))()}},{key:"fetchDataComboBySlug",value:function(e,t,n){var o=this;return(0,d.Z)((function(){var r,i,s,c,a,u,d,l,f,_,h,g,v,x;return(0,m.__generator)(this,(function(m){switch(m.label){case 0:return-1!==(r=o.comboGroupProductsRetrive.findIndex((function(t){return t.id===e})))&&(null===(i=o.comboGroupProductsRetrive[r].products.find((function(e){return e.slug===t&&e.selected})))||void 0===i?void 0:i.selected)?(i.selected=!1,[2]):[4,p.default.get("productos/".concat(t,"/"))];case 1:return s=m.sent(),c=s.data,a=c.slug,u=c.name,[4,p.default.get("productos/".concat(t,"/grupos_presentaciones/"))];case 2:return d=m.sent(),l=d.data,[4,p.default.get("productos/".concat(t,"/grupos_modificadores/"))];case 3:return f=m.sent(),_=f.data,[4,p.default.get("productos/".concat(t,"/grupos_notas/"))];case 4:return h=m.sent(),g=h.data,v=!0,x=!1,(_.length||g.length||l.length)&&(x=!0,(v=!_.some((function(e){return e.isMandatory})))&&g.length?v=!g.some((function(e){return e.isMandatory})):v&&l.length&&(v=!l.some((function(e){return e.isMandatory})))),-1!==r&&o.comboGroupProductsRetrive[r].products.forEach((function(e){e.selected=e.slug===t&&v})),o.product={id:n,name:u,slug:a,presentations:l,modifiers:_,notes:g,openModal:x,status:"READY",customizers:te.customizers,idGroup:e},o.comboGroupProductsRetrive[r].customizers=ne,[2]}}))}))()}},{key:"loadDataComboRetriveByItems",value:function(e){var t=e.idItemCombo,n=e.idGroupProduct,o=e.selecteds;return(0,d.Z)((function(){var e;return(0,m.__generator)(this,(function(r){return e=o.map(function(){var e=(0,d.Z)((function(e){var o,r,i,s,c,a,u,f,_,h,v,x,b,j,y,C,N;return(0,m.__generator)(this,(function(k){switch(k.label){case 0:return o=e.slug,r=e.id,[4,Promise.all([p.default.get("productos/".concat(o,"/grupos_presentaciones/")),p.default.get("productos/".concat(o,"/grupos_modificadores/")),p.default.get("productos/".concat(o,"/grupos_notas/"))])];case 1:return s=l.Z.apply(void 0,[k.sent(),3]),c=s[0],a=c.data,u=s[1],f=u.data,_=s[2],h=_.data,v=a.map(function(){var e=(0,d.Z)((function(e){var o,i,s,c;return(0,m.__generator)(this,(function(a){switch(a.label){case 0:return o=e.id,[4,p.default.get("ordenesCombos/".concat(t,"/presentaciones/?grupo_producto_id=").concat(n,"&producto_id=").concat(r,"&grupo_presentacion_id=").concat(o))];case 1:return i=a.sent(),s=i.data,c=s.find((function(e){return e.selected})),[2,{idGroupCustomizer:o,idItem:c.id,amount:c.amount}]}}))}));return function(t){return e.apply(this,arguments)}}()),x=h.map(function(){var e=(0,d.Z)((function(e){var o,i,s,c;return(0,m.__generator)(this,(function(a){switch(a.label){case 0:return o=e.id,[4,p.default.get("ordenesCombos/".concat(t,"/notas/?grupo_producto_id=").concat(n,"&producto_id=").concat(r,"&grupo_nota_id=").concat(o))];case 1:return i=a.sent(),s=i.data,c=s.find((function(e){return e.selected})),[2,{idGroupCustomizer:o,idItem:c.id,amount:c.amount}]}}))}));return function(t){return e.apply(this,arguments)}}()),b=f.map(function(){var e=(0,d.Z)((function(e){var o,i;return(0,m.__generator)(this,(function(s){switch(s.label){case 0:return o=e.id,[4,p.default.get("ordenesCombos/".concat(t,"/modificadores/?grupo_producto_id=").concat(n,"&producto_id=").concat(r,"&grupo_modificador_id=").concat(o))];case 1:return i=s.sent(),[2,i.data.filter((function(e){return e.selected})).map((function(e){return{idGroupCustomizer:o,idItem:e.id,amount:e.amount}}))]}}))}));return function(t){return e.apply(this,arguments)}}()),j={},[4,Promise.all(v)];case 2:return j.presentation=k.sent(),[4,Promise.all(x)];case 3:return j.note=k.sent(),C=(y=(i=[]).concat).apply,N=[i],[4,Promise.all(b)];case 4:return[2,(j.modifier=C.apply(y,N.concat(g.Z.apply(void 0,[k.sent()]))),j)]}}))}));return function(t){return e.apply(this,arguments)}}()),[2,Promise.all(e)]}))}))()}},{key:"setGroupSelected",value:function(e){this.groupSelected=e}},{key:"clearProduct",value:function(){this.product=te}},{key:"closeModal",value:function(){this.product.openModal=!1}},{key:"setCustomizer",value:function(e){var t=this.product,n=t.idGroup,o=t.slug,r=this.comboGroupProductsRetrive.findIndex((function(e){return e.id===n}));this.comboGroupProductsRetrive[r].customizers=e,this.comboGroupProductsRetrive[r].products.forEach((function(e){e.selected=e.slug===o}))}},{key:"updateProduct",value:function(e){return(0,d.Z)((function(){return(0,m.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,p.default.put("ordenesCombos/".concat(e.combo,"/"),e,{headers:{"Content-Type":"application/json"}})];case 1:return t.sent(),J.i.fetchOrderById(e.order),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))()}},{key:"updateAddItemById",value:function(e){var t=this.comboDetailRetrive,n=t.quantity+1;n<=10&&(t.totalAmount=t.totalAmount/t.quantity*n,t.quantity=n,p.default.put("ordenesCombos/".concat(e,"/"),{quantity:n}))}},{key:"updateReduceItemById",value:function(e){var t=this.comboDetailRetrive,n=t.quantity-1;n>=1&&(t.totalAmount=t.totalAmount/t.quantity*n,t.quantity=n,p.default.put("ordenesCombos/".concat(e,"/"),{quantity:n}))}}]),e}(),re=(0,v.wW)(new oe,{sumAmountCustomizers:function(e){var t=e.comboGroupProductsRetrive;try{var n=t.reduce((function(e,t){var n=t.customizers,o=void 0===n?[]:n,r=Object.keys(o).reduce((function(e,t){var n;return e+(null===(n=o[t])||void 0===n?void 0:n.reduce((function(e,t){return e+t.amount}),0))}),0);return e+r}),0);return n}catch(o){return 0}},sumAmountCustomizersByGroup:function(e){var t=e.comboGroupProductsRetrive;return function(e){try{var n=t.find((function(t){return t.id===e}));return n?Object.keys(n.customizers).reduce((function(e,t){return e+n.customizers[t].reduce((function(e,t){return e+t.amount}),0)}),0):0}catch(o){return 0}}}}),ie=function(e){var t=e.id,n=e.title,r=e.onChange,i=(e.alert,e.isMandatory),c=e.idItemCombo,a=e.idProductGroup,u=e.idProduct,d=e.onSyncCustomizers,l=(0,P.V)("ordenesCombos/".concat(c,"/modificadores/?grupo_producto_id=").concat(a,"&producto_id=").concat(u,"&grupo_modificador_id=").concat(t)).data,m=(0,s.useState)(!1),p=m[0],f=m[1];return(0,s.useEffect)((function(){!p&&l.length&&(d({data:l,type:"modifier",idGroupCustomizer:t}),f(!0))}),[p,l,t,d]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"combo-product-modal__content__section",children:[(0,o.jsxs)("section",{className:"combo-product-modal__content__section__head",children:[(0,o.jsx)("p",{className:"combo-product-modal__content__section__head__title",children:n}),(0,o.jsx)("p",{className:"combo-product-modal__content__section__head__text",children:i?"Obligatorio":"Opcional"})]}),null===l||void 0===l?void 0:l.map((function(e){return(0,o.jsx)(O.W,{className:"customize__items",id:e.id,name:"combomodifierR".concat(t),value:e.id,text:e.name,price:e.amount,onChange:r(t,e),checked:e.selected},e.id)}))]})})},se=function(e){var t=e.id,n=e.title,r=e.onChange,i=(e.alert,e.isMandatory),c=e.idItemCombo,a=e.idProductGroup,u=e.idProduct,d=e.onSyncCustomizers,l=e.openCheckNote,m=(0,P.V)("ordenesCombos/".concat(c,"/notas/?grupo_producto_id=").concat(a,"&producto_id=").concat(u,"&grupo_nota_id=").concat(t)).data,p=(0,s.useState)(!1),f=p[0],_=p[1];return(0,s.useEffect)((function(){!f&&m.length&&(d({data:m,type:"note",idGroupCustomizer:t}),_(!0))}),[f,m,t,d]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"combo-product-modal__content__section",children:[(0,o.jsxs)("section",{className:"combo-product-modal__content__section__head",children:[(0,o.jsx)("p",{className:"combo-product-modal__content__section__head__title",children:n}),(0,o.jsx)("p",{className:l?"combo-product-modal__content__section__head__text--red":"combo-product-modal__content__section__head__text",children:i?"Obligatorio":"Opcional"})]}),null===m||void 0===m?void 0:m.map((function(e){return(0,o.jsx)(R.o,{className:"customize__items",id:e.id,name:"combonoteR".concat(t),value:e.id,text:e.name,price:e.amount,onChange:r(t,e),checked:e.selected},e.id)}))]})})},ce=function(e){var t=e.id,n=e.title,r=e.onChange,i=(e.alert,e.isMandatory),c=e.idItemCombo,a=e.idProductGroup,u=e.idProduct,d=e.onSyncCustomizers,l=e.openCheckPresentation,m=(0,P.V)("ordenesCombos/".concat(c,"/presentaciones/?grupo_producto_id=").concat(a,"&producto_id=").concat(u,"&grupo_presentacion_id=").concat(t)).data,p=(0,s.useState)(!1),f=p[0],_=p[1];return(0,s.useEffect)((function(){!f&&m.length&&(d({data:m,type:"presentation",idGroupCustomizer:t}),_(!0))}),[f,m,t,d]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:"combo-product-modal__content__section",children:[(0,o.jsxs)("section",{className:"combo-product-modal__content__section__head",children:[(0,o.jsx)("p",{className:"combo-product-modal__content__section__head__title",children:n}),(0,o.jsx)("p",{className:l?"combo-product-modal__content__section__head__text--red":"combo-product-modal__content__section__head__text",children:i?"Obligatorio":"Opcional"})]}),null===m||void 0===m?void 0:m.map((function(e){return(0,o.jsx)(R.o,{className:"customize__items",id:e.id,name:"combopresentationR".concat(t),value:e.id,text:e.name,price:e.amount,onChange:r(t,e),checked:e.selected},e.id)}))]})})},ae=(0,s.memo)(ce),ue=i()((function(){return n.e(2403).then(n.bind(n,2403))}),{loadableGenerated:{webpack:function(){return[2403]}},ssr:!1}),de=function(e){var t=e.idItemCombo,n=e.idProductGroup,r=e.idProduct,i=(e.slug,e.isOpenModal),c=e.onCloseModal,d=(0,u.R)(re).product,l=d.modifiers,m=d.presentations,p=d.notes,f=(0,s.useState)({presentation:[],note:[],modifier:[]}),_=f[0],v=f[1],x=(0,s.useState)(!1),b=x[0],j=x[1],y=(0,s.useState)(!1),k=y[0],w=y[1],S=(0,s.useCallback)((function(e){var t=e.idGroupCustomizer,n=e.data,o=e.type;v((function(e){return(0,N.Z)((0,C.Z)({},e),(0,h.Z)({},o,n.filter((function(e){return e.selected})).map((function(e){return{idGroupCustomizer:t,idItem:e.id,amount:e.amount}}))))}))}),[]),G=(0,s.useCallback)((function(e,t){return function(n){var o=t.amount,r=t.id;v((function(t){var n=t.presentation.findIndex((function(t){return t.idGroupCustomizer===e}));return-1!==n?(t.presentation[n].idItem=r,t.presentation[n].amount=o,t):(0,N.Z)((0,C.Z)({},t),{presentation:(0,g.Z)(t.presentation).concat([{idGroupCustomizer:e,idItem:r,amount:o}])})}))}}),[]),z=(0,s.useCallback)((function(e,t){return function(n){var o=t.amount,r=t.id;v((function(t){var n=t.note.findIndex((function(t){return t.idGroupCustomizer===e}));return-1!==n?(t.note[n].idItem=r,t.note[n].amount=o,t):(0,N.Z)((0,C.Z)({},t),{note:(0,g.Z)(t.note).concat([{idGroupCustomizer:e,idItem:r,amount:o}])})}))}}),[]),P=(0,s.useCallback)((function(e,t){return function(){var n=t.amount,o=t.id;v((function(t){var r=t.modifier.findIndex((function(t){return t.idGroupCustomizer===e&&t.idItem===o}));return-1!==r?(t.modifier.splice(r,1),t):(0,N.Z)((0,C.Z)({},t),{modifier:(0,g.Z)(t.modifier).concat([{idGroupCustomizer:e,idItem:o,amount:n}])})}))}}),[]);return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(ue,{open:i,children:(0,o.jsxs)("section",{className:"combo-product-modal",children:[(0,o.jsx)("section",{className:"combo-product-modal__close",onClick:c,children:(0,o.jsx)(a.Fk5,{className:"combo-product-modal__close__icon"})}),(0,o.jsxs)("section",{className:"combo-product-modal__content",children:[m.map((function(e){return(0,o.jsx)(ae,{id:e.id,title:e.name,isMandatory:e.isMandatory,onChange:G,onSyncCustomizers:S,idItemCombo:t,idProductGroup:n,idProduct:r,openCheckPresentation:k},e.id)})),p.map((function(e){return(0,o.jsx)(se,{id:e.id,title:e.name,isMandatory:e.isMandatory,onChange:z,onSyncCustomizers:S,idItemCombo:t,idProductGroup:n,idProduct:r,openCheckNote:b},e.id)})),l.map((function(e){return(0,o.jsx)(ie,{id:e.id,title:e.name,isMandatory:e.isMandatory,onChange:P,onSyncCustomizers:S,idItemCombo:t,idProductGroup:n,idProduct:r},e.id)})),(0,o.jsx)("button",{onClick:function(){var e=m.every((function(e){var t=e.id;return!e.isMandatory||_.presentation.some((function(e){return e.idGroupCustomizer===t}))})),t=p.every((function(e){var t=e.id;return!e.isMandatory||_.note.some((function(e){return e.idGroupCustomizer===t}))})),n=l.every((function(e){var t=e.id;return!e.isMandatory||_.modifier.some((function(e){return e.idGroupCustomizer===t}))}));j(!t),w(!e),e&&t&&n&&(re.setCustomizer(_),c())},className:"combo-product-modal__content__btn combo-product-modal__content__btn__active",children:"Continuar"})]})]})})})},le=n(1039),me=function(e){var t=e.isSelected,n=e.defaultAmount,r=e.idGroup,i=(0,u.R)(re).sumAmountCustomizersByGroup;return t&&i&&i(r)?(0,o.jsxs)("p",{children:["+ S/",i(r).toFixed(2)]}):t&&n?(0,o.jsxs)("p",{children:["+ S/ ",n.toFixed(2)]}):null},pe=(0,s.memo)(me),fe=function(e){var t=e.id,n=e.slug,r=e.name,i=e.idGroup,s=e.isSelected,c=e.defaultAmount,a=function(){var e=(0,d.Z)((function(){return(0,m.__generator)(this,(function(e){return re.fetchDataComboBySlug(i,n,t),[2]}))}));return function(){return e.apply(this,arguments)}}();return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("section",{className:s?"buttonListColored":"button-list",onClick:a,children:[(0,o.jsx)("p",{children:r}),(0,o.jsx)(pe,{isSelected:s,defaultAmount:c,idGroup:i})]})})},_e=(0,s.memo)(fe,le.w),he=function(e){var t=e.idGroup,n=e.products,r=e.title,i=e.idItemCombo,c=e.isOrderProduct,a=e.isOrderNote,d=e.setIsSelectProduct,l=e.setIsSelectNote,m=(0,u.R)(y.b).groupSelected,p=(0,s.useState)(!1),f=p[0],_=p[1],h=(0,s.useState)(!1),g=h[0],v=h[1],x=m===t;return(0,s.useEffect)((function(){2==t&&((null===n||void 0===n?void 0:n.filter((function(e){return 1==e.selected})).length)>=1?(d(!0),_(!0)):(d(!1),_(!1))),1==t&&((null===n||void 0===n?void 0:n.filter((function(e){return 1==e.selected})).length)>=1?(l(!0),v(!0)):(l(!1),v(!1)))}),[n]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{className:x?"customizeColored":2==t&&c&&!f||1==t&&a&&!g?"customize-red":"customize",children:[(0,o.jsx)("h1",{children:r.toUpperCase()}),x?(0,o.jsx)(M.n6z,{className:"customizeColored__iconMinus",onClick:function(){y.b.setGroupSelected(0)}}):(0,o.jsx)(M.OzW,{className:"customize__iconPlus",onClick:function(){y.b.setGroupSelected(t)}})]}),x&&i&&(0,o.jsx)("section",{className:"customizeColored__content",children:null===n||void 0===n?void 0:n.map((function(e){return(0,o.jsx)(_e,{id:e.id,idGroup:t,slug:e.slug,name:e.name,isSelected:e.selected,defaultAmount:e.additionalAmount},e.id)}))})]})},ge=(0,s.memo)(he,le.w),ve=function(e){var t=e.idComboRetrive,n=e.onCloseModal,r=(0,u.R)(re),i=r.comboDetailRetrive,c=r.sumAmountCustomizers,a=r.comboGroupProductsRetrive,d=r.product,l=(0,s.useState)(""),m=l[0],p=l[1],f=(0,s.useState)(!1),_=f[0],v=(f[1],(0,s.useState)()),x=v[0],b=v[1],j=(0,s.useState)(""),y=j[0],C=j[1],N=(0,s.useState)(""),k=N[0],G=N[1],P=(0,s.useState)(!1),M=P[0],R=P[1],E=(0,s.useState)(!1),O=E[0],A=E[1],q=(0,s.useState)(window.innerHeight),B=q[0],F=q[1],L=(0,w.Z)(),T=(0,S.Z)(L.breakpoints.down("md"));(0,s.useEffect)((function(){return window.addEventListener("resize",W),function(){window.removeEventListener("resize",W)}}),[]);var W=(0,s.useCallback)((function(){F(window.innerHeight)}),[]);(0,s.useEffect)((function(){re.fetchComboRetrive(t),p(i.coment)}),[t,i.coment]);var H=function(e){e.preventDefault(),re.updateAddItemById(t)},U=function(e){e.preventDefault(),re.updateReduceItemById(t)},K=z()("main-combo__container__content__description",{scrolled:x});(0,s.useEffect)((function(){var e=function(){b(!0)};return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[]);var J=function(e){var o=re.comboGroupProductsRetrive.every((function(e){return e.products.some((function(e){return e.selected}))})),r=re.comboGroupProductsRetrive.map((function(e){return e.products.some((function(e){return e.selected}))}));if(C(r[0]?"":"Elige un producto"),G(r[1]?"":"Elige un producto"),o){var i=re.comboGroupProductsRetrive.map((function(e){var t,n=e.products.find((function(e){return e.selected}));return{product_group:e.id,ordenes_combos_productos:[{product:n.id,ordenes_combos_grupos_customs:(t=[]).concat.apply(t,(0,g.Z)(Object.keys(e.customizers).map((function(t){return e.customizers[t].reduce((function(e,n){var o,r=e.findIndex((function(e){return e["".concat(t,"_group")]===n.idGroupCustomizer})),i=(0,h.Z)({presentation:null,modifier:null,note:null},t,n.idItem);-1===r?e.push((o={presentation_group:null,modifier_group:null,note_group:null},(0,h.Z)(o,"".concat(t,"_group"),n.idGroupCustomizer),(0,h.Z)(o,"ordenes_combos_customs",[i]),o)):r>=0&&e[r].ordenes_combos_customs.push(i);return e}),[])}))))}]}})),s=JSON.parse(window.localStorage.getItem("orderIdPA"));re.updateProduct({order:s,combo:t,coment:"".concat(""===m?"":m),ordenes_combos_grupos_productos:i}),p(""),n(e)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("section",{style:T?{height:B}:{},className:"main-combo",children:[(0,o.jsx)("section",{className:"main-combo__image",style:{backgroundImage:"url(".concat(i.combo.image,")")}}),(0,o.jsx)("div",{className:"main-combo__afterImageMob"}),(0,o.jsxs)("section",{className:"main-combo__container",children:[(0,o.jsxs)("section",{className:"main-combo__container__content",children:[(0,o.jsx)("div",{className:"main-combo__container__content__divMob1"}),(0,o.jsx)("div",{className:"main-combo__container__content__divMob2"}),(0,o.jsx)("section",{className:K,children:(0,o.jsx)(I.v,{product:i.combo.name,description:i.combo.description})}),(0,o.jsxs)("section",{className:"main-combo__container__content__sections",children:[(0,o.jsx)("section",{className:"main-combo__container__content__sections__products",children:null===a||void 0===a?void 0:a.map((function(e,n){return(0,o.jsxs)("div",{children:[(0,o.jsx)(ge,{idGroup:e.id,products:e.products||[],title:e.name,idItemCombo:t,isOrderProduct:y,isOrderNote:k,setIsSelectProduct:R,setIsSelectNote:A}),0==n&&!M&&(0,o.jsx)("p",{className:"main-combo__container__content__sections__error__modal",children:y}),1==n&&!O&&(0,o.jsx)("p",{className:"main-combo__container__content__sections__error__modal",children:k})]},n)}))}),(0,o.jsx)("section",{className:"main-combo__container__content__sections__comment",children:(0,o.jsx)(D.s,{value:m,onChange:function(e){e.preventDefault(),p(e.target.value)},onKeyDown:function(e){e.key&&F("100vh")},onKeyPress:function(e){"Enter"===e.key&&F(window.innerHeight)}})})]})]}),(0,o.jsx)("section",{className:"main-combo__container__end",children:(0,o.jsx)(Z.n,{btnText:"Guardar",add:H,reduce:U,quantity:i.quantity,total:(i.combo.price+c)*i.quantity,onClick:J,animation:_})})]}),(0,o.jsx)("section",{className:"main-combo__endMobile",children:(0,o.jsx)(Z.n,{btnText:"Guardar",add:H,reduce:U,quantity:i.quantity,total:(i.combo.price+c)*i.quantity,onClick:J,animation:_})})]}),d.openModal&&(0,o.jsx)(de,{idItemCombo:t,idProductGroup:d.idGroup,idProduct:d.id,slug:d.slug,isOpenModal:d.openModal,onCloseModal:function(){re.closeModal()}})]})},xe=i()((function(){return n.e(9437).then(n.bind(n,9437))}),{loadableGenerated:{webpack:function(){return[9437]}},ssr:!1}),be=i()((function(){return n.e(8277).then(n.bind(n,8277))}),{loadableGenerated:{webpack:function(){return[8277]}},loading:function(){return""}}),je=function(e){var t=e.idProduct,n=e.idProductRetrive,r=e.idCombo,i=e.fromPage,d=e.idComboRetrive,l=e.onCloseProductRetrive,m=e.onCloseComboRetrive,p=e.idComplement,f=e.isComplement,_=(e.onCloseComplement,e.stores),h=(0,c.useRouter)(),g=j(t),v=g.product,x=g.presentation,C=g.note,N=g.complement,k=j(p),w=k.product,S=k.presentation,G=k.note,z=(0,u.R)(y.b),P=z.comboDetail,I=z.comboProducts,Z=z.comboComplements,M=(0,u.R)(L.u).existsComplement;(0,s.useEffect)((function(){void 0!==r&&y.b.fetchCombo(r)}),[r]);var R=function(e){e.preventDefault(),M?L.u.setExistsComplement(""):n?l():d?m():(b.clearCustomizerGroup(),t?void 0===v.coleccionSlug||i||f?h.push("/"):h.push("/#".concat(v.slug),void 0,{scroll:!1}):r&&(void 0===P.collectionSlug||i||f?h.push("/"):h.push("/#".concat(P.slug),void 0,{scroll:!1})))};return(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(xe,{open:Boolean(t||r||n||p||d),onClose:R,isComplement:!!p,children:(0,o.jsxs)("section",{className:"product",children:[(0,o.jsx)("section",{className:"product__close",onClick:R,children:(0,o.jsx)(a.Fk5,{className:"product__close__icon"})}),t&&(0,o.jsx)(K,{data:v,presentationGroup:x,noteGroup:C,complementList:N,stores:_}),p&&(0,o.jsx)(K,{data:w,presentationGroup:S,noteGroup:G,complementList:[],stores:_,isComplement:f}),r&&void 0!==P?(0,o.jsx)(be,{data:P,comboProducts:I,comboComplements:Z,stores:_}):null,n?(0,o.jsx)(ee,{idProductRetrive:n,onCloseModal:R}):null,d?(0,o.jsx)(ve,{idComboRetrive:d,onCloseModal:R}):null]})})})}},1039:function(e,t,n){n.d(t,{w:function(){return r}});var o=n(2222);function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(e&&t&&"object"===typeof e&&"object"===typeof t){var s=function(){var o=c[u];if(i&&!i.includes(o)||!i)if(Array.isArray(e[o])){if(e[o].length!==t[o].length)return{v:!1};if(e[o].filter((function(e,s){return!r(e,t[o][s],n,i)})).length>0)return{v:!1}}else if(!r(e[o],t[o],n,i))return{v:!1}},c=Object.keys(e),a=Object.keys(t);if(c.length!==a.length)return!1;for(var u=0;u<c.length;u++){var d=s();if("object"===(0,o.Z)(d))return d.v}return!0}return!(!n||"function"!==typeof e||"function"!==typeof t)||e===t}},2224:function(e,t,n){n.d(t,{Q:function(){return c}});var o=n(7568),r=n(655),i=n(4371),s=n(9983),c=function(){var e=(0,o.Z)((function(e){return(0,r.__generator)(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,i.default.post("ordenesProductos/",e,{headers:{"Content-Type":"application/json"}})];case 1:return t.sent(),s.i.fetchOrderById(e.order),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()},4895:function(e,t,n){n.d(t,{K:function(){return c}});var o=n(7568),r=n(655),i=n(7294),s=n(4371),c=function(e){var t=(0,i.useState)([]),n=t[0],c=t[1];(0,i.useEffect)((function(){void 0!==e&&a(e)}),[e]);var a=function(){var e=(0,o.Z)((function(e){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,s.default.get(e)];case 1:return t=n.sent(),c(t.data),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{data:n}}},6833:function(e,t,n){n.d(t,{V:function(){return c}});var o=n(7568),r=n(655),i=n(7294),s=n(4371),c=function(e){var t=(0,i.useState)([]),n=t[0],c=t[1];(0,i.useEffect)((function(){a(e)}),[e]);var a=function(){var e=(0,o.Z)((function(e){var t;return(0,r.__generator)(this,(function(n){switch(n.label){case 0:return[4,s.default.get(e)];case 1:return t=n.sent(),c(t.data),[2]}}))}));return function(t){return e.apply(this,arguments)}}();return{data:n}}},4477:function(e,t,n){n.d(t,{b:function(){return s}});var o=n(7568),r=n(655),i=n(4371),s=function(){var e=(0,o.Z)((function(){var e,t,n,o;return(0,r.__generator)(this,(function(r){switch(r.label){case 0:return null===(e=JSON.parse(window.localStorage.getItem("ModalityInfoPA")))?[2]:(t=JSON.parse(window.localStorage.getItem("orderIdPA")),n={modality:e.modality,shop:e.shop,address:e.address,reference:e.reference,latitude:"".concat(e.latitude?e.latitude:""),longitude:"".concat(e.longitude?e.longitude:"")},o={modality:e.modality,shop:e.shop,schedule_pickup:e.schedule_pickup},"Delivery"!==e.modality?[3,2]:[4,i.default.put("ordenes/".concat(t,"/"),n)]);case 1:r.sent(),r.label=2;case 2:return"En Tienda"!==e.modality?[3,4]:[4,i.default.put("ordenes/".concat(t,"/"),o)];case 3:r.sent(),r.label=4;case 4:return[2]}}))}));return function(){return e.apply(this,arguments)}}()},2952:function(e,t,n){n.d(t,{b:function(){return f}});var o=n(7568),r=n(1438),i=n(2951),s=n(4924),c=n(655),a=n(3932),u=n(4371),d=n(9983),l={presentations:[],modifiers:[],notes:[],status:"NEW",name:"",slug:"",openModal:!1,idGroup:0},m={modifier:[],note:[],presentation:[]},p=function(){function e(){(0,r.Z)(this,e),(0,s.Z)(this,"comboDetail",{}),(0,s.Z)(this,"comboProducts",[]),(0,s.Z)(this,"comboComplements",[]),(0,s.Z)(this,"groupSelected",0),(0,s.Z)(this,"exist",!0),(0,s.Z)(this,"product",l)}return(0,i.Z)(e,[{key:"fetchCombo",value:function(e){var t=this;return(0,o.Z)((function(){var n,o,r;return(0,c.__generator)(this,(function(i){switch(i.label){case 0:if(!e)return[2];i.label=1;case 1:return i.trys.push([1,6,,7]),[4,u.default.get("combos/".concat(e,"/"))];case 2:return(n=i.sent()).status>=200&&n.status<300?(t.comboDetail=n.data,[4,u.default.get("combos/".concat(e,"/grupos_productos/"))]):[3,5];case 3:return o=i.sent(),t.comboProducts=o.data,t.fetchComboProducts(t.comboProducts.map((function(e){return e.id}))),[4,u.default.get("combos/".concat(e,"/complementos/"))];case 4:r=i.sent(),t.comboComplements=r.data,i.label=5;case 5:return[3,7];case 6:return i.sent(),t.exist=!1,[3,7];case 7:return[2]}}))}))()}},{key:"fetchComboProducts",value:function(e){var t=this;return(0,o.Z)((function(){return(0,c.__generator)(this,(function(n){return e.forEach(function(){var e=(0,o.Z)((function(e){var n,o;return(0,c.__generator)(this,(function(r){switch(r.label){case 0:return[4,u.default.get("gruposProductos/".concat(e,"/productos/"))];case 1:return n=r.sent(),-1!==(o=t.comboProducts.findIndex((function(t){return t.id===e})))&&(t.comboProducts[o].customizers=m,t.comboProducts[o].products=n.data),[2]}}))}));return function(t){return e.apply(this,arguments)}}()),[2]}))}))()}},{key:"fetchDataComboBySlug",value:function(e,t){var n=this;return(0,o.Z)((function(){var o,r,i,s,a,d,p,f,_,h,g,v,x,b;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:return-1!==(o=n.comboProducts.findIndex((function(t){return t.id===e})))&&(null===(r=n.comboProducts[o].products.find((function(e){return e.slug===t&&e.isSelected})))||void 0===r?void 0:r.isSelected)?(r.isSelected=!1,[2]):[4,u.default.get("productos/".concat(t,"/"))];case 1:return i=c.sent(),s=i.data,a=s.slug,d=s.name,[4,u.default.get("productos/".concat(t,"/grupos_presentaciones/"))];case 2:return p=c.sent(),f=p.data,[4,u.default.get("productos/".concat(t,"/grupos_modificadores/"))];case 3:return _=c.sent(),h=_.data,[4,u.default.get("productos/".concat(t,"/grupos_notas/"))];case 4:return g=c.sent(),v=g.data,x=!0,b=!1,(h.length||v.length||f.length)&&(b=!0,(x=!h.some((function(e){return e.isMandatory})))&&v.length?x=!v.some((function(e){return e.isMandatory})):x&&f.length&&(x=!f.some((function(e){return e.isMandatory})))),-1!==o&&n.comboProducts[o].products.forEach((function(e){e.isSelected=e.slug===t&&x})),n.product={name:d,slug:a,presentations:f,modifiers:h,notes:v,openModal:b,status:"READY",customizers:l.customizers,idGroup:e},n.comboProducts[o].customizers=m,[2]}}))}))()}},{key:"setGroupSelected",value:function(e){this.groupSelected=e}},{key:"clearProduct",value:function(){this.product=l}},{key:"closeModal",value:function(){this.product.openModal=!1}},{key:"setCustomizer",value:function(e){var t=this.product,n=t.idGroup,o=t.slug,r=this.comboProducts.findIndex((function(e){return e.id===n}));this.comboProducts[r].customizers=e,this.comboProducts[r].products.forEach((function(e){e.isSelected=e.slug===o}))}},{key:"addProduct",value:function(e){return(0,o.Z)((function(){return(0,c.__generator)(this,(function(t){switch(t.label){case 0:return[4,u.default.post("ordenesCombos/",e,{headers:{"Content-Type":"application/json"}})];case 1:return t.sent(),d.i.fetchOrderById(e.order),[2]}}))}))()}}]),e}(),f=(0,a.wW)(new p,{sumAmountCustomizers:function(e){return e.comboProducts.reduce((function(e,t){var n=t.customizers;return e+Object.keys(n).reduce((function(e,t){return e+n[t].reduce((function(e,t){return e+t.amount}),0)}),0)}),0)},sumAmountCustomizersByGroup:function(e){var t=e.comboProducts;return function(e){var n=t.find((function(t){return t.id===e}));return n?Object.keys(n.customizers).reduce((function(e,t){return e+n.customizers[t].reduce((function(e,t){return e+t.amount}),0)}),0):0}}})}}]);